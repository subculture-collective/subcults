# ============================================================================
# Subcults Environment Configuration
# ============================================================================
# Copy this file to dev.env and fill in the required values.
# See README.md for detailed configuration documentation.

# ============================================================================
# CORE CONFIGURATION
# ============================================================================

# Environment mode: development, staging, or production
# Affects logging verbosity and feature flags
# Aliases (precedence): SUBCULT_ENV, ENV, GO_ENV
SUBCULT_ENV=development

# API server port
# Default: 8080
# Aliases: SUBCULT_PORT, PORT
SUBCULT_PORT=8080

# ============================================================================
# DATABASE
# ============================================================================

# Neon Postgres connection string with PostGIS extension
# Format: postgres://user:password@host:port/database?sslmode=require
# REQUIRED: Application will not start without this
# Example: postgres://subcults:password@localhost:5432/subcults?sslmode=disable
DATABASE_URL=postgres://subcults:password@localhost:5432/subcults?sslmode=disable

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# JWT signing secret for access and refresh tokens
# REQUIRED: Recommended: at least 32 characters for security
# Generate with: openssl rand -base64 32
# Example output: abcdefghijklmnopqrstuvwxyz0123456789ABCD==
JWT_SECRET=

# ============================================================================
# EXTERNAL SERVICES
# ============================================================================

## LiveKit (WebRTC Audio/Video)
# Cloud WebRTC SFU for live audio sessions
# Get credentials from: https://livekit.io/

# LiveKit server WebSocket URL
# REQUIRED: Application will not start without this
# Example: wss://your-project.livekit.cloud
LIVEKIT_URL=

# LiveKit API key for server-side operations
# REQUIRED: Application will not start without this
LIVEKIT_API_KEY=

# LiveKit API secret for token generation
# REQUIRED: Application will not start without this
LIVEKIT_API_SECRET=

## Stripe (Payments)
# Payment processing for tickets, merch, and scene payouts
# Get credentials from: https://dashboard.stripe.com/apikeys

# Stripe secret API key (starts with sk_test_ or sk_live_)
# REQUIRED: Application will not start without this
STRIPE_API_KEY=

# Stripe webhook signing secret for event verification (starts with whsec_)
# REQUIRED: Application will not start without this
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=

## Cloudflare R2 (Media Storage)
# S3-compatible object storage for images, audio, and videos
# Get credentials from: https://dash.cloudflare.com/

# R2 bucket name for media assets
# Example: subcults-media-dev
R2_BUCKET_NAME=

# R2 access key ID for S3 API authentication
R2_ACCESS_KEY_ID=

# R2 secret access key for S3 API authentication
R2_SECRET_ACCESS_KEY=

# R2 endpoint URL for S3 API
# Format: https://<account-id>.r2.cloudflarestorage.com
# Example: https://abc123.r2.cloudflarestorage.com
R2_ENDPOINT=

## MapTiler (Map Tiles)
# Map tiles for MapLibre frontend
# Get API key from: https://cloud.maptiler.com/account/keys/

# MapTiler API key for tile requests
# REQUIRED: Application will not start without this
MAPTILER_API_KEY=

## Web Push Notifications (Frontend Only)
# VAPID public key for Web Push notifications
# This is a frontend environment variable (prefixed with VITE_)
# Generate VAPID key pair with: npx web-push generate-vapid-keys
# Only the public key is needed in the frontend
# Keep the private key secure on the backend

# VAPID public key (base64 URL-safe string, starts with 'B')
# Example: BEl62iUYgUivxIkv69yViEuiBIa-Ib37J8xQmr8Db5s...
VITE_VAPID_PUBLIC_KEY=

## Jetstream (AT Protocol)
# Real-time AT Protocol firehose for decentralized data ingestion
# WebSocket endpoint for Jetstream subscription

# Jetstream WebSocket URL
# REQUIRED: Indexer will not start without this
# Default: wss://jetstream1.us-east.bsky.network/subscribe
JETSTREAM_URL=wss://jetstream1.us-east.bsky.network/subscribe

# ============================================================================
# OBSERVABILITY (OPTIONAL)
# ============================================================================

# Prometheus metrics endpoint port
# Default: 9090
# Used by the indexer for exposing Prometheus metrics
METRICS_PORT=9090

# Internal authentication token for metrics endpoint
# Optional: Leave empty to disable authentication on /metrics
# Recommended for production: Use a strong random token
INTERNAL_AUTH_TOKEN=

# ============================================================================
# FEATURE FLAGS (OPTIONAL)
# ============================================================================

# Enable trust-weighted ranking in search and feed endpoints
# Default: false
# Set to 'true' to enable trust score weighting in result ranking
# Accepts: true/false, 1/0, yes/no, on/off (case-insensitive)
RANK_TRUST_ENABLED=false

# ============================================================================
# OBSERVABILITY & TRACING (OPTIONAL)
# ============================================================================

# Enable OpenTelemetry distributed tracing
# Default: false
# Accepts: true/false, 1/0, yes/no, on/off (case-insensitive)
TRACING_ENABLED=false

# Tracing exporter type
# Options: otlp-http, otlp-grpc
# Default: otlp-http
TRACING_EXPORTER_TYPE=otlp-http

# OTLP endpoint URL for trace export
# For Jaeger (OTLP): http://localhost:4318 (HTTP) or localhost:4317 (gRPC)
# For production OTLP collectors: https://your-collector:4318
# Leave empty to use default OTLP endpoint
TRACING_OTLP_ENDPOINT=

# Sampling rate for traces (0.0 to 1.0)
# 0.1 = 10% of traces sampled (recommended for production)
# 1.0 = 100% of traces sampled (recommended for development)
# Default: 0.1 (10%)
TRACING_SAMPLE_RATE=1.0

# Disable TLS for OTLP connection (development only)
# Set to true when using local Jaeger without TLS
# Default: false
TRACING_INSECURE=true
