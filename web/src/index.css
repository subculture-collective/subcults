/**
 * Tailwind CSS Directives
 */
@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * CSS Variables for Runtime Theme Switching
 * These are exposed from Tailwind theme for dark mode toggling
 */
:root {
  /* Light mode colors (default) */
  --color-background: #ffffff;
  --color-background-secondary: #f9f9f9;
  --color-foreground: #213547;
  --color-foreground-secondary: #464646;
  --color-foreground-muted: #888888;
  --color-border: #e5e5e5;
  --color-border-hover: #646cff;

  /* Typography */
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  
  /* Rendering optimizations */
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/**
 * Dark Mode Theme Variables
 * Applied when 'dark' class is on root element
 */
.dark {
  --color-background: #242424;
  --color-background-secondary: #1a1a1a;
  --color-foreground: rgba(255, 255, 255, 0.87);
  --color-foreground-secondary: rgba(255, 255, 255, 0.7);
  --color-foreground-muted: #888888;
  --color-border: #404040;
  --color-border-hover: #646cff;
  
  color-scheme: dark;
}

/**
 * Base Styles
 */
@layer base {
  body {
    @apply m-0 min-w-[320px] min-h-screen bg-background text-foreground;
    /* Improve touch interaction on mobile */
    -webkit-tap-highlight-color: rgba(100, 108, 255, 0.1);
    touch-action: manipulation;
  }

  #root {
    @apply w-full h-screen;
  }

  a {
    @apply font-medium text-brand-primary no-underline hover:text-brand-primary-dark;
    transition: color 0.25s;
  }

  h1 {
    @apply text-2xl sm:text-3xl md:text-4xl lg:text-5xl leading-tight;
  }

  h2 {
    @apply text-2xl sm:text-3xl md:text-4xl leading-tight;
  }

  h3 {
    @apply text-xl sm:text-2xl md:text-3xl leading-tight;
  }

  button {
    @apply rounded-lg border border-transparent px-5 py-2.5 text-base font-medium
           cursor-pointer transition-colors duration-250
           bg-background-secondary hover:border-brand-primary
           focus:outline-none focus-visible:outline focus-visible:outline-4
           focus-visible:outline-brand-primary;
    /* Ensure buttons are touch-friendly */
    @apply min-h-touch min-w-touch;
    touch-action: manipulation;
  }
}

/**
 * Theme Transition Utility Class
 * Apply to elements that need smooth color transitions when toggling dark mode
 * Usage: className="theme-transition"
 */
@layer utilities {
  .theme-transition {
    transition-property: background-color, border-color, color;
    transition-duration: 250ms;
    transition-timing-function: ease-in-out;
  }
}

/**
 * Accessibility: Volume Slider Focus Styles
 * Ensures keyboard users can see focus on range inputs
 */
.volume-slider {
  /* Remove default outline on all focus */
  outline: none;
}

.volume-slider:focus-visible {
  /* Provide visible focus indicator for keyboard users */
  outline: 2px solid #646cff;
  outline-offset: 2px;
}
